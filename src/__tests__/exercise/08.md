# testing custom hooks

## Background

Testing custom hooks is a common question as well. Step back and think about how
our guiding testing principle applies to this situation: the more your tests
resemble the way your software is used, the more confidence they can give you.
How is your custom hook used? It's used in a component! So that's how it should
be tested.

Often, the easiest and most straightforward way to test a custom hook is to
create a component that uses it and then test that component instead.

## Exercise

In this exercise, we have gone back to our simple counter, except now that logic
is all in a custom hook and we need to test that functionality. To do that,
we'll make a test component that uses the hook in the typical way that our hook
will be used and then test that component, indirectly testing our hook.

## Extra Credit

### 1. ðŸ’¯ fake component

Sometimes it's hard to write a test component without making a pretty
complicated "TestComponent." For those situations, you can try something like
this:

```javascript
let result
function TestComponent(props) {
  result = useCustomHook(props)
  return null
}

// interact with and assert on results here
```

Learn more about this approach from my blog post:
[How to test custom React hooks](https://kentcdodds.com/blog/how-to-test-custom-react-hooks)

### 2. ðŸ’¯ setup function

Add tests titled:

1. allows customization of the initial count
2. allows customization of the step

And test those use cases. Then abstract away the common logic into a `setup`
function. This one might be a little tricky thanks to variable references, but I
know you can do it!

ðŸ’° Here's a little tip. Due to variable references, you'll need to change your
test component a bit:

```javascript
const results = {}
function TestComponent(props) {
  Object.assign(results, useCustomHook())
  return null
}

// interact with and assert on results here
```

### 3. ðŸ’¯ using react-hooks testing library

Your `setup` function is very similar to the `renderHook` function from
[`@testing-library/react-hooks`](https://github.com/testing-library/react-hooks-testing-library)!
Swap your own `setup` function with that.

## ðŸ¦‰ Elaboration and Feedback

- The best way to test a custom React hook is to create a test component that
  uses that hook, then test that component (see commented out code in this
  exercise)
- Sometimes it can be complicated to build a test component within the unit
  test. For cases like these, the `renderHook` utility from the React Testing
  Library can be used. This utility will simply return the results of calling
  the hook and render nothing. Since nothing is rendered we won't use the
  `screen` utility at all, but we can interact directly with the results of
  calling the hook (see the not-commented-out code in this exercise)
